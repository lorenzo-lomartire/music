<!doctype html>
<html lang='en'>
	<head>
		<title>Music</title>
		<meta charset='UTF-8'>
		<meta name='description' content='Lorenzo Lomartire â€” Music'>
		<style>
			* {
				margin: 0;
			}
			body {
				height: 100vh;
			}
			main {
				height: inherit;
				display: flex;
				justify-content: space-around;
				align-items: center;
			}
			img {
				height: inherit;
			}
			#next {
				transform: rotate(0.5turn);
			}
			.preload {
				display: none;
			}
		</style>
	</head>
	<body>
		<main>
			<button id='prev'>&#11013;</button>
			<img id='main' alt='music'>
			<button id='next'>&#11013;</button>
			<img id='preload-prev' class='preload'></div>
			<img id='preload-next' class='preload'></div>
		</main>
		<script>
			import('./resources/index.json', {
				assert: {
					type: 'json'
				}
			}).then((data) => {
				var root = './resources/';
				var main = data.default.Tchaikovsky;
				root += main.name + '/';
				main = main.data;
				root += main.name + '/';
				main = main.data;
				root += main.name + '/';
				main = main.data;
				root += main.name + '/';
				main = main.data;
				root += main.name + '/';
				root.split(' ').join('%20');
				var path = Object.entries(data.default.Tchaikovsky.data.data.data.data.data);
				path.map(el => {
					path[Number(el[0])] = el[1];
				});
				var current = 0;
				document.getElementById('main').src = root + path[current];
				if (current > 0) document.getElementById('preload-prev').src = root + path[current - 1];
				if (current < path.length - 1) document.getElementById('preload-next').src = root + path[current + 1];
				document.getElementById('prev').onclick = () => turn(0);
				document.getElementById('next').onclick = () => turn(1);
				function turn(direction) {
					let increment = direction ? 1 : -1;
					let limit = direction ? path.length - 1 : 0;
					current += ( current == limit ? 0 : increment );
					document.getElementById('main').src = root + path[current];
					if (current > 0) document.getElementById('preload-prev').src = root + path[current - 1];
					if (current < path.length - 1) document.getElementById('preload-next').src = root + path[current + 1];
				}
			});
		</script>
	</body>
</html>
