<!doctype html>
<html lang='en'>
	<head>
		<title>Music</title>
		<meta charset='UTF-8'>
		<meta name='description' content='Lorenzo Lomartire — Music'>
		<style>
			* {
				margin: 0;
			}
			body {
				height: 100vh;
			}
			main {
				height: inherit;
				display: flex;
				justify-content: space-around;
				align-items: center;
			}
			img {
				height: inherit;
			}
			#next {
				transform: rotate(0.5turn);
			}
			.preload {
				display: none;
			}
		</style>
	</head>
	<body>
		<main>
			<button id='prev'>&#11013;</button>
			<img id='main' src='./resources/т-30(Б)_0088.png' alt='music'>
			<button id='next'>&#11013;</button>
			<img id='preload-prev' class='preload' src='./resources/т-30(Б)_0088.png'></div>
			<img id='preload-next' class='preload' src='./resources/т-30(Б)_0089.png'></div>
		</main>
		<script>
			import('./resources/index.json', {
				assert: {
					type: 'json'
				}
			}).then((data) => {
				var path = Object.entries(data.default["Tchaikovsky"]["data"]["data"]["data"]["data"]["data"]);
				path.map(el => {
					path[Number(el[0])] = el[1];
				});
				console.log(path);
				var current = 0;
				document.getElementById('prev').onclick = () => turn(0);
				document.getElementById('next').onclick = () => turn(1);
				function turn(direction) {
					let increment = direction ? 1 : -1;
					let limit = direction ? path.length - 1 : 0;
					current += ( current == limit ? 0 : increment );
					document.getElementById('main').src = path[current];
					if (current > min) document.getElementById('preload-prev').src = './resources/т-30(Б)_00' + ( current - 1 ) + '.png';
					if (current < max) document.getElementById('preload-next').src = './resources/т-30(Б)_00' + ( current + 1 ) + '.png';
				}
			});
		</script>
	</body>
</html>
